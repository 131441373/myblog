## 介绍
**通信链路** 由 同轴电缆,铜线,光纤和无线电频谱 组成 。
存储时K/M/G是1024进制, 传输时是1000进制, 1B=8b大小写区别
当一台端系统要向另一台端系统发送数据时, 发送端系统将数据分段, 并为每段加上首部字节 。 由此形成的信息包用计算机网络的术语来说称为分组(packet)
这些分组通过网络发送到目的端系统, 在那里被装配成初始数据 

**分组交换机** 从它的一条入通信链路接收到达的分组, 并从它的一条出通信链路转发该分组
其两种最著名的类型是 **路由器(router)** (通常用于网络核心中) 和 **链路层交换机(link-layer switch)** (通常用于接入网中)

从发送端到接收端的称为 **路径(route/path)**, 没走一条链路称为一 **跳**

端系统通过**因特网服务提供商**(Internet Service Provider, **ISP**) 接入因特网
每个 ISP 自身就是一个由多台分组交换机和多段通信链路组成的网络
如住宅区ISP, 公司ISP, 大学ISP, 公共场所提供WiFi接入的ISP, 智能手机提供移动接入的蜂窝数据ISP

端系统 、 分组交换机和其他因特网部件都要运行一系列 **协议(protocol)** , 这些协议控制因特网中信息的接收和发送
**TCP (Transmission Control Protocol , 传输控制协议)** 和 **IP (Internet Protocol , 网际协议)** 是因特网中两个最为重要的协议
在端系统中, **拥塞控制协议** 控制了在发送方和接收方之间传输的分组发送的 **速率** ；**路由器中的协议** 决定了分组从源到目的地的 **路径**

在线社交网络, 视频会议, 多人游戏等涉及多个相互交换数据的端系统, 被称为**分布式应用程序(distributed applicalion)**
与因特网相连的端系统提供了一个**套接字接口 (socket interface)**, 该接口规定了运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式 。 因特网套接字接口是一套发送程序必须遵循的规则集合 ， 因此因特网能够将数据交付给目的地 。好比送信需要名字地址邮编邮票

PAN: Personal Area Network: 个域网, 蓝牙等
LAN: Local Area Network: 局域网, 家庭或企业用
WLAN: Wireless LAN: 无线局域网, 如WiFi
MAN: Metropolitan Area Network: 城域网, 覆盖一个地区
WAN: Wide Area Network: 广域网,  覆盖很大地理区域，乃至覆盖地区和国家
WWAN: Wireless WAN: 无线广域网 

## 网络边缘
**网络边缘**设备如 **服务器(server),客户(client)(手机,电脑,智能手表等)** 统称为 **主机(host)** 或 **端系统(end system)**
**接入网(access network)**是指将端系统物理连接到其边缘路由器的网络
**边缘路由器(edge router)**是端系统到任何其他远程端系统的**路径上的第一台**路由器
有线如 **数字用户线(Digital Subscriber Line, DSL)** 和 **电缆(cable) (光纤, 同轴电缆, 混合HFC)** 和 **光纤到户(Fiber To The Home, FTTH)**
无线如 **以太网** 和 **WiFi**, 通过  陆地无线电信道4G / 卫星无线电通道

## 网络核心
交换机使用 **存储转发传输**, 完整存储一个分组后再传出去

每台分组交换机有多条链路与之相连 。 对于每条相连的链路 ， 该分组交换机具有一个 **输出缓存(output buffer/queue)**
它用于存储路由器准备发往那条链路的分组 。 该输出缓存在分组交换中起着重要的作用 。 
如果到达的分组需要传输到某条链路 ， 但发现该链路正忙于传输其他分组 ， 该到达分组必须在输出缓存中等待. 因此有排队时延(queuing delay)
buffer大小是有限的，到达的分组可能发现buffer已被其他等待传输的分组充满了. 这时 **丢失(丢包)(packet loss)** , 到达的分组或已经排队的分组之一被丢弃 

分组头包含目标IP信息, 每台路由器有一个 **转发表(forwarding table)** 将目的地址的一部分映射成输出链路, 据此选择输出方向

**分组转发**可以**统计多路复用**, 给得多传得多, 同时传得快
**Packet Per Second(PPS)**，表示交换机或路由器等网络设备**以包为单位的转发速率**

电路交换: 多用于电话, 需要建立连接并预留资源, 之后比特流直达终点 (类比天然气管道)
报文交换: 同时比如三个路由器, 每4秒存储转发依次, 那得12秒过完路由
分组交换: 但是分成四组时, 每1秒过一个路由器, 3秒过完路由, 最后一个分组第4-1秒出发, 总用时也就6秒 (类比高速公路, 包是小车)

## 网络协议
IETF是制定互联网标准的核心组织, TCP/IP/HTTP等均有其制定
Internet标准以RFC（Request For Comments，请求评注）文档的形式公开

通信双方要说的事情多种多样，导致网络协议异常复杂
所以需要分层结构, 模块独立, 统一标准

层次栈: 为降低网络设计的复杂性，网络使用层次结构的协议栈，每一层都使用其下一层所提供的服务，并为上层提供自己的服务
服务是垂直的, 协议是水平的
解口: 在每一相邻层次之间的, 定义了下层向上层提供哪些服务原语
对等实体: 不同主机上构成同一层次的实体成为对等实体

## 网络度量
不同的链路能够以不同的速率传输数据, 以 **传输速率 (transmission rate) 以 bit/s (bps) 度量**
同时根据链路的物理媒体不同链路也有不同的传播速率 (一般接近光速)
带宽是指链路的最高传输速率, 也以bps度量
传输速率是实时的, 按策略分配的一部分带宽

$d_{proc}$ 处理时延: 存储包, 分析包头信息等
$d_{queue}$ 排队时延: 输出缓存区排队 (如果不用排队则0)
$d_{trans}$ 传输时延(发送时延): 数据从结点进入到传输媒体所需要的时间 (=分组长度(b)/传输速率(bps))
$d_{prop}$ 传播时延: 在传输媒体中传输的时间 (=链路长度(m)/传输速度(m/s))
总时延为四者之和

**往返时延RTT**(Round-Trip Time): 从发送方发送数据开始，到发送方收到来自接收方的确认，经历的总时间 (比如ping)

"时延带宽积 = 传播时延 $\times$ 带宽": 把整个链路利用满

吞吐量 (throughput): 单位时间内通过某个网络(或信道、接口)的数据量，单位是 bps
有效吞吐量(goodput): 单位时间内，目的地正确接收到的有用信息的数目, 单位是 bps

## 网络恶意
病毒virus: 需要某种形式的用户交互来不断传播的恶意软件, 如含可执行代码的email附件（打开后会给通信录所有再次用户发送）
蠕虫worm: 一种无须用户明显交互即可运行和传播的独立程序, 通过不断扫描网络中存在漏洞的计算机，进行传播
自我复制： 一旦恶意软件感染了一台主机，就会从那台主机寻求进入更多的主机，影响与受感染设备通信的其他设备

拒绝服务攻击 (Denial-of-Service (**DoS**) attack): 攻击者通过制造大量虚假流量占用资源使合法流量无法使用资源(服务、带宽)
入侵到发起虚假流量的大量主机(产生僵尸主机或僵尸网络botnet), 再从被入侵的僵尸主机向目标发送大量数据包，导致目标主机无法应对
同时还能够通过僵尸网络, 从而避免追查

拖库：入侵盗走用户资料
洗库：黑产业, 用户数据变现
撞库：使用常用密码(可以是上两种方法中获取分析的), 在其他网站“撞大运”

## 历史
1983年TCP/IP协议诞生, 标志着互联网诞生
2000年互联网泡沫破裂
2007年3G+iphone
2010年4G
2018年5G
